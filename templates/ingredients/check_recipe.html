{% extends 'base.html' %}
{% load static %}

{% block title %}
<title>Ingredientes</title>
{% endblock %}

{% block contents %}

{% include 'navbar.html' %}

<main class="container text-center">

  <h3>Ingredientes para {{ recipe_title }}</h3>

  <div class="shadow p-2" id="ingredient-section">
    <ul>
      {% for ingredient_line in ingredient_lines %}
        <li>{{ingredient_line.text}}</li>
      {% empty %}
        <p>No hay ingredientes para esta receta</p>
      {% endfor %}
    </ul>
  </div>

  <form class="m-3" method="post">
    {% csrf_token %}
    {{ form.as_p }}
    <input id="btn-add" class="btn btn-secondary" type="submit"
           value="Agregar ingrediente" disabled>
  </form>

  {% if create_ingredient_form %}
    <form action="{% url 'add_new_ingredient_to_recipe' recipe_id %}"
          class="m-3" method="post">
      <p>No conocemos ese ingrediente. ¿Nos puedes ayudar?</p>
      <p>Ingresa la palabra en plural y singular.</p>
      {% csrf_token %}
      {{ create_ingredient_form.as_p }}
      {{ form.as_p }}
      <input class="btn btn-success" type="submit" value="Crear ingrediente">
    </form>
  {% endif %}

  <h6 class="container">Ayúdanos a identificar nombres de ingredientes</h6>
  <p>
    Si hay un ingrediente que no está en la lista de abajo, selecciona
    la palabra y agrégala.
  </p>

  <h5>Ingredientes:</h5>
  <ul class="ingredient-list">
    {% for ingredient in ingredients.all %}
      <li>{{ingredient.names.first.singular}}</li>
    {% endfor %}
  </ul>

  <script src="{% static 'checkRecipeIngredients.js' %}"></script>

</main>

{% endblock contents %}
