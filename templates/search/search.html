{% extends 'base.html' %}
{% load crispy_forms_tags %}

{% block style %}
{% load static %}
<link rel="stylesheet" href="{% static 'search/style.css' %}">
{% endblock %}

{% block title %}
<title>Â¡Busca tus recetas!</title>
{% endblock %}

{% block contents %}

{% include 'navbar.html' %}

<main class="container">

    <h2 class="my-2">Escribe los ingredientes</h2>

    <div id="include-input-area" class="tags-area container border my-2">
        <input id="include-input" class="ingredient-input border-0 shadow-none" type="text" name="include_ingredient_name">
    </div>
    <div id="exclude-input-area" class="tags-area container border my-2">
        <input id="exclude-input" class="ingredient-input border-0 shadow-none" type="text" name="exclude_ingredient_name">
    </div>
    <form action="{% url 'do_search_by_ingredients' %}" method="post">
        {% csrf_token %}
        {{ button_form }}
        <input class="btn btn-success" type="submit" value="Buscar">
    </form>

    {% if recipes %}
        {% for recipe in recipes %}
        <div class="card my-4">
            <div class="card-header">
                <h5 class="card-title d-inline-block">{{recipe.editions.last.title}}</h5>
                <span>Creado por {{recipe.author.first_name}} {{recipe.author.last_name}}</span=>
            </div>
            <div class="card-body">
                {% for ingredient in recipe.ingredients.all %}
                <span class="badge bg-secondary">{{ingredient.names.first.singular}}</span>
                {% endfor %}
            </div>
        </div>
        {% endfor %}
    {% endif %}

    <script src="{% static 'search/ingredientTags.js' %}"></script>
</main>
{% endblock contents %}